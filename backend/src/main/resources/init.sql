create table address (id bigint generated by default as identity, adress_line varchar(255), city varchar(255), country varchar(255), zip varchar(255), primary key (id));
create table application_user (account_locked boolean, login_count integer, id bigint generated by default as identity, dtype varchar(31) not null, email varchar(255), family_name varchar(255), first_name varchar(255), password varchar(255), phone_number varchar(255), salt varchar(255), primary key (id));
create table artist (id bigint generated by default as identity, artist_name varchar(255), first_name varchar(255), last_name varchar(255), primary key (id));
create table artist_show (artist_id bigint not null, show_id bigint not null);
create table event (event_type tinyint check (event_type between 0 and 2), duration bigint, id bigint generated by default as identity, description varchar(255), title varchar(255), primary key (id));
create table hall_plan (id bigint generated by default as identity, background_image blob, primary key (id));
create table hall_plan_sectors (hall_plan_id bigint not null, sectors_id bigint not null unique);
create table hall_sector (hall_plan_id bigint, id bigint generated by default as identity, frontend_coordinates varchar(255), name varchar(255), primary key (id));
create table hall_sector_show (id bigint generated by default as identity, price bigint, sector_id bigint, show_id bigint, primary key (id));
create table hall_spot (id bigint generated by default as identity, sector_id bigint, dtype varchar(31) not null, frontend_coordinates varchar(255), primary key (id));
create table invoice (id bigint generated by default as identity, order_id bigint, primary key (id));
create table location (id bigint generated by default as identity, name varchar(255), primary key (id));
create table message (id bigint generated by default as identity, published_at timestamp(6) not null, title varchar(100) not null, summary varchar(500) not null, text varchar(10000) not null, primary key (id));
create table news (date_time timestamp(6), event_id bigint, id bigint generated by default as identity, description varchar(255), title varchar(255), news_image blob, primary key (id));
create table orders (customer_id bigint, id bigint generated by default as identity, primary key (id));
create table show (date_time timestamp(6), event_id bigint, id bigint generated by default as identity, primary key (id));
create table ticket (reserved boolean, valid boolean, hall_spot_id bigint, id bigint generated by default as identity, order_id bigint, show_id bigint, hash varchar(255), primary key (id));
create table user_news (news_id bigint not null, user_id bigint not null);
alter table if exists artist_show add constraint FKbtmuw7mk78f397tlitx460ue3 foreign key (show_id) references show;
alter table if exists artist_show add constraint FKq45wpgrsiesjq8ky9l5u0rkmm foreign key (artist_id) references artist;
alter table if exists hall_plan_sectors add constraint FKbhxmbt88u286px0p88863rvxq foreign key (sectors_id) references hall_sector;
alter table if exists hall_plan_sectors add constraint FKtfqkut2v3mm7md3ew5wmh9dih foreign key (hall_plan_id) references hall_plan;
alter table if exists hall_sector add constraint FK2ckgmuh0lmcm6icqcxs5ptmft foreign key (hall_plan_id) references hall_plan;
alter table if exists hall_sector_show add constraint FK142ud5n0fvnxm9dwf9wjdel5m foreign key (sector_id) references hall_sector;
alter table if exists hall_sector_show add constraint FKkwp0t4ofye9txsqojagyfeget foreign key (show_id) references show;
alter table if exists hall_spot add constraint FKlau3akieetlinok9w7cr32fcn foreign key (sector_id) references hall_sector;
alter table if exists invoice add constraint FKthf5w8xuexpjinfl7xheakhqn foreign key (order_id) references orders;
alter table if exists news add constraint FKf9li4ynupmggdu8j208ooihfi foreign key (event_id) references event;
alter table if exists orders add constraint FKfu1pq0ji1m3mvrrxarlj9jpv5 foreign key (customer_id) references application_user;
alter table if exists show add constraint FKpalieekuh35uu44ur4ocln5q2 foreign key (event_id) references event;
alter table if exists ticket add constraint FKis6hd4amr1qjex7nexkyn0qbl foreign key (hall_spot_id) references hall_spot;
alter table if exists ticket add constraint FKfxop4bl4yxuwgij2pa9ghtal6 foreign key (order_id) references orders;
alter table if exists ticket add constraint FKd142jb6gj0dhu38tyf2bn5tc foreign key (show_id) references show;
alter table if exists user_news add constraint FKb8go94ohx3ucvudssnjpfj5b9 foreign key (news_id) references news;
alter table if exists user_news add constraint FKad0j4651o3x5edqkcpkgu2xnh foreign key (user_id) references application_user;
create table address (id bigint generated by default as identity, adress_line varchar(255), city varchar(255), country varchar(255), zip varchar(255), primary key (id));
create table application_user (account_locked boolean, login_count integer, id bigint generated by default as identity, dtype varchar(31) not null, email varchar(255), family_name varchar(255), first_name varchar(255), password varchar(255), phone_number varchar(255), salt varchar(255), primary key (id));
create table artist (id bigint generated by default as identity, artist_name varchar(255), first_name varchar(255), last_name varchar(255), primary key (id));
create table artist_show (artist_id bigint not null, show_id bigint not null);
create table event (event_type tinyint check (event_type between 0 and 2), duration bigint, id bigint generated by default as identity, description varchar(255), title varchar(255), primary key (id));
create table hall_plan (id bigint generated by default as identity, background_image blob, primary key (id));
create table hall_plan_sectors (hall_plan_id bigint not null, sectors_id bigint not null unique);
create table hall_sector (hall_plan_id bigint, id bigint generated by default as identity, frontend_coordinates varchar(255), name varchar(255), primary key (id));
create table hall_sector_show (id bigint generated by default as identity, price bigint, sector_id bigint, show_id bigint, primary key (id));
create table hall_spot (id bigint generated by default as identity, sector_id bigint, dtype varchar(31) not null, frontend_coordinates varchar(255), primary key (id));
create table invoice (id bigint generated by default as identity, order_id bigint, primary key (id));
create table location (id bigint generated by default as identity, name varchar(255), primary key (id));
create table message (id bigint generated by default as identity, published_at timestamp(6) not null, title varchar(100) not null, summary varchar(500) not null, text varchar(10000) not null, primary key (id));
create table news (date_time timestamp(6), event_id bigint, id bigint generated by default as identity, description varchar(255), title varchar(255), news_image blob, primary key (id));
create table orders (customer_id bigint, id bigint generated by default as identity, primary key (id));
create table show (date_time timestamp(6), event_id bigint, id bigint generated by default as identity, primary key (id));
create table ticket (reserved boolean, valid boolean, hall_spot_id bigint, id bigint generated by default as identity, order_id bigint, show_id bigint, hash varchar(255), primary key (id));
create table user_news (news_id bigint not null, user_id bigint not null);
alter table if exists artist_show add constraint FKbtmuw7mk78f397tlitx460ue3 foreign key (show_id) references show;
alter table if exists artist_show add constraint FKq45wpgrsiesjq8ky9l5u0rkmm foreign key (artist_id) references artist;
alter table if exists hall_plan_sectors add constraint FKbhxmbt88u286px0p88863rvxq foreign key (sectors_id) references hall_sector;
alter table if exists hall_plan_sectors add constraint FKtfqkut2v3mm7md3ew5wmh9dih foreign key (hall_plan_id) references hall_plan;
alter table if exists hall_sector add constraint FK2ckgmuh0lmcm6icqcxs5ptmft foreign key (hall_plan_id) references hall_plan;
alter table if exists hall_sector_show add constraint FK142ud5n0fvnxm9dwf9wjdel5m foreign key (sector_id) references hall_sector;
alter table if exists hall_sector_show add constraint FKkwp0t4ofye9txsqojagyfeget foreign key (show_id) references show;
alter table if exists hall_spot add constraint FKlau3akieetlinok9w7cr32fcn foreign key (sector_id) references hall_sector;
alter table if exists invoice add constraint FKthf5w8xuexpjinfl7xheakhqn foreign key (order_id) references orders;
alter table if exists news add constraint FKf9li4ynupmggdu8j208ooihfi foreign key (event_id) references event;
alter table if exists orders add constraint FKfu1pq0ji1m3mvrrxarlj9jpv5 foreign key (customer_id) references application_user;
alter table if exists show add constraint FKpalieekuh35uu44ur4ocln5q2 foreign key (event_id) references event;
alter table if exists ticket add constraint FKis6hd4amr1qjex7nexkyn0qbl foreign key (hall_spot_id) references hall_spot;
alter table if exists ticket add constraint FKfxop4bl4yxuwgij2pa9ghtal6 foreign key (order_id) references orders;
alter table if exists ticket add constraint FKd142jb6gj0dhu38tyf2bn5tc foreign key (show_id) references show;
alter table if exists user_news add constraint FKb8go94ohx3ucvudssnjpfj5b9 foreign key (news_id) references news;
alter table if exists user_news add constraint FKad0j4651o3x5edqkcpkgu2xnh foreign key (user_id) references application_user;
